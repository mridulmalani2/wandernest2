# ==================================
# DATABASE CONFIGURATION
# ==================================
# PostgreSQL database connection string
# For Vercel: Use Vercel Postgres or external provider (e.g., Supabase, Neon, PlanetScale)
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?sslmode=require
#
# ⚠️ BUILD-TIME + RUNTIME REQUIREMENT:
# This variable is required during BOTH build-time and runtime on Vercel.
# - Build-time: Used by Prisma to generate client and apply migrations
# - Runtime: Used by application to connect to database
# In Vercel Dashboard, ensure this is set for your target environment (Production/Preview)
DATABASE_URL="postgresql://user:password@localhost:5432/tourwiseco"

# ==================================
# AUTHENTICATION SECRETS
# ==================================
# JWT Secret for custom auth (must be a strong random string)
# Generate with: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"

# NextAuth Secret (must be a strong random string)
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="your-nextauth-secret-change-this-in-production"

# Token Secret for secure match response links (optional, falls back to NEXTAUTH_SECRET)
# Used to sign/verify tokens in match accept/decline email links
# Generate with: openssl rand -base64 32
# TOKEN_SECRET="your-token-secret-change-this-in-production"

# NextAuth URL (your deployment URL)
# For local development: http://localhost:3000
# For Vercel: https://your-app.vercel.app
NEXTAUTH_URL="http://localhost:3000"

# ==================================
# GOOGLE OAUTH (For Tourist Sign-in ONLY)
# ==================================
# Get from: https://console.cloud.google.com/apis/credentials
# IMPORTANT: This is ONLY used for TOURIST authentication
# - Tourists: Use Google OAuth (ONLY method)
# - Students: Use magic link email authentication (ONLY method - Google OAuth is blocked)
# - User type determined automatically by email domain (approved student domains = student)
#
# Make sure to add EXACT authorized redirect URIs in Google Console:
#   Local development: http://localhost:3000/api/auth/callback/google
#   Production: https://wandernest2-umber.vercel.app/api/auth/callback/google
#   (Replace production URL with your actual Vercel domain)
#
# CRITICAL: The redirect URI must match EXACTLY:
#   - Include the full path /api/auth/callback/google
#   - No trailing slashes
#   - Use http:// for localhost, https:// for production
GOOGLE_CLIENT_ID="your-google-client-id"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# ==================================
# EMAIL CONFIGURATION (REQUIRED for Student Magic-Link Sign-In)
# ==================================
# CRITICAL: These variables are REQUIRED for student magic-link authentication to work.
# Without these, students will see "Check your email" but NO EMAIL will be sent.
#
# STUDENT AUTHENTICATION REQUIREMENTS:
# - Students MUST sign in using magic links sent to their university email
# - Students CANNOT use Google OAuth (it's blocked for student domains)
# - Only approved university domains are allowed (see src/lib/email-validation.ts)
# - Current approved domains: hec.edu, hec.fr, ashoka.edu.in, select .edu institutions
#
# For Gmail:
#   1. Enable 2-Step Verification in your Google Account
#   2. Generate an App Password at https://myaccount.google.com/apppasswords
#   3. Use the app password (16 chars, no spaces) as EMAIL_PASS
#
# For other providers (SendGrid, Mailgun, Resend, etc.):
#   - Use their SMTP settings (host, port, credentials)
#   - Ensure your "from" address is verified with the provider
#
# Email notifications sent:
# - MAGIC LINKS for student sign-in (REQUIRED - primary student auth method)
# - Booking confirmations to tourists
# - New request notifications to students
# - Acceptance notifications to both parties
# - Verification codes (for legacy unauthenticated tourist flow)
#
# If not set in production, magic-link authentication will be DISABLED
# and students will NOT be able to sign in.
EMAIL_HOST="smtp.gmail.com"
EMAIL_PORT="587"
EMAIL_USER="your-email@gmail.com"
EMAIL_PASS="your-gmail-app-password-16-chars"
EMAIL_FROM="TourWiseCo <noreply@tourwiseco.com>"

# Where contact form submissions are sent (defaults to EMAIL_FROM if not set)
CONTACT_EMAIL="support@tourwiseco.com"

# Verification code expiry time in seconds (default: 600 = 10 minutes)
VERIFICATION_CODE_EXPIRY="600"

# ==================================
# REDIS CONFIGURATION (Optional but Recommended for Production)
# ==================================
# Used for:
# - Verification code storage (falls back to database if not configured)
# - Caching approved students and other frequently accessed data
#
# If not set:
# - Verification codes stored in database (slower but functional)
# - Cache uses in-memory storage (reset on deployment)
#
# For Vercel: Use Vercel KV (recommended) or Upstash Redis
# Format: redis://default:password@hostname:port
# REDIS_URL="redis://localhost:6379"

# ==================================
# BASE URL CONFIGURATION
# ==================================
# Public base URL for the application (used in emails and redirects)
# For local development: http://localhost:3000
# For production: https://your-app.vercel.app
NEXT_PUBLIC_BASE_URL="http://localhost:3000"

# ==================================
# ENVIRONMENT
# ==================================
# For local development: "development"
# For production (Vercel): "production" (auto-set by Vercel)
NODE_ENV="development"

# ==================================
# VERCEL BLOB STORAGE (Required for File Uploads)
# ==================================
# Vercel Blob storage token for uploading student verification documents
# Get from: Vercel Dashboard → Storage → Blob → Create Store
# Required for: Student ID cards, government IDs, selfies, profile photos
# If not set: File uploads will fail with an error message
BLOB_READ_WRITE_TOKEN="vercel_blob_rw_xxxxxxxxxxxx"

# ==================================
# IMPORTANT NOTES FOR VERCEL DEPLOYMENT
# ==================================
# REQUIRED variables for production:
# - DATABASE_URL (MUST be set at build-time AND runtime - see note above)
# - GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET (runtime only)
# - NEXTAUTH_SECRET (runtime only)
# - NEXTAUTH_URL (runtime only - MUST be https:// in production)
# - EMAIL_HOST, EMAIL_USER, EMAIL_PASS (REQUIRED for magic-link sign-in, runtime only)
# - EMAIL_FROM (runtime only - must be verified with your email provider)
# - NEXT_PUBLIC_BASE_URL (REQUIRED for email callback links, build+runtime)
#
# RECOMMENDED variables for production:
# - REDIS_URL (for better performance, runtime only)
# - BLOB_READ_WRITE_TOKEN (for file uploads, runtime only)
#
# OPTIONAL variables:
# - JWT_SECRET (only if using admin panel, runtime only)
# - TOKEN_SECRET (for email link tokens, runtime only)
# - VERIFICATION_CODE_EXPIRY (defaults to 600 seconds, runtime only)
#
# For detailed setup instructions and build-time vs runtime requirements, see:
# - VERCEL_ENV_VARIABLES_GUIDE.md (comprehensive guide with troubleshooting)
# - .env.production.template (minimal production template)
# - docs/env_variables_required.md
# - docs/database_setup_vercel.md
