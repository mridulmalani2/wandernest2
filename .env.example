# ==================================
# DATABASE CONFIGURATION
# ==================================
# PostgreSQL database connection string
# For Vercel: Use Vercel Postgres or external provider (e.g., Supabase, Neon, PlanetScale)
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?sslmode=require
#
# ⚠️ BUILD-TIME + RUNTIME REQUIREMENT:
# This variable is required during BOTH build-time and runtime on Vercel.
# - Build-time: Used by Prisma to generate client and apply migrations
# - Runtime: Used by application to connect to database
# In Vercel Dashboard, ensure this is set for your target environment (Production/Preview)
DATABASE_URL="postgresql://user:password@localhost:5432/tourwiseco"

# ==================================
# AUTHENTICATION SECRETS
# ==================================
# JWT Secret for custom auth (must be a strong random string)
# Generate with: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"

# NextAuth Secret (must be a strong random string)
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="your-nextauth-secret-change-this-in-production"

# Token Secret for secure match response links (optional, falls back to NEXTAUTH_SECRET)
# Used to sign/verify tokens in match accept/decline email links
# Generate with: openssl rand -base64 32
# TOKEN_SECRET="your-token-secret-change-this-in-production"

# NextAuth URL (your deployment URL)
# For local development: http://localhost:3000
# For Vercel: https://your-app.vercel.app
NEXTAUTH_URL="http://localhost:3000"

# ==================================
# GOOGLE OAUTH (For Both Student & Tourist Sign-in)
# ==================================
# Get from: https://console.cloud.google.com/apis/credentials
# IMPORTANT: This is the PRIMARY authentication method for both students and tourists
# - Students: Must use academic email (@.edu, @.edu.in, @.ac.uk, etc.)
# - Tourists: Can use any Google email
# Make sure to add authorized redirect URIs:
#   - http://localhost:3000/api/auth/callback/google (for local development)
#   - https://your-domain.com/api/auth/callback/google (for production)
GOOGLE_CLIENT_ID="your-google-client-id"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# ==================================
# EMAIL CONFIGURATION (Required for Magic Link Sign-In)
# ==================================
# SMTP settings for sending emails via nodemailer
# Required for:
# - Magic link authentication (student/tourist sign-in)
# - Booking confirmations to tourists
# - New request notifications to students
# - Acceptance notifications to both parties
# - Verification codes (for legacy unauthenticated tourist flow)
#
# If not set in production, magic link sign-in will fail
# In development, emails are logged to console when EMAIL_HOST is not configured
#
# For Gmail:
# 1. Enable 2-factor authentication on your Google account
# 2. Generate an App Password: https://myaccount.google.com/apppasswords
# 3. Use the app password (not your regular password) as EMAIL_PASS
#
# For other SMTP providers (SendGrid, Mailgun, etc.):
# - Use their SMTP credentials and host settings
EMAIL_HOST="smtp.gmail.com"
EMAIL_PORT="587"
EMAIL_USER="your-email@gmail.com"
EMAIL_PASS="your-app-specific-password"
EMAIL_FROM="TourWiseCo <noreply@tourwiseco.com>"

# Where contact form submissions are sent (defaults to EMAIL_FROM if not set)
CONTACT_EMAIL="support@tourwiseco.com"

# Verification code expiry time in seconds (default: 600 = 10 minutes)
VERIFICATION_CODE_EXPIRY="600"

# ==================================
# REDIS CONFIGURATION (Optional but Recommended for Production)
# ==================================
# Used for:
# - Verification code storage (falls back to database if not configured)
# - Caching approved students and other frequently accessed data
#
# If not set:
# - Verification codes stored in database (slower but functional)
# - Cache uses in-memory storage (reset on deployment)
#
# For Vercel: Use Vercel KV (recommended) or Upstash Redis
# Format: redis://default:password@hostname:port
# REDIS_URL="redis://localhost:6379"

# ==================================
# BASE URL CONFIGURATION
# ==================================
# Public base URL for the application (used in emails and redirects)
# For local development: http://localhost:3000
# For production: https://your-app.vercel.app
NEXT_PUBLIC_BASE_URL="http://localhost:3000"

# ==================================
# ENVIRONMENT
# ==================================
# For local development: "development"
# For production (Vercel): "production" (auto-set by Vercel)
NODE_ENV="development"

# ==================================
# VERCEL BLOB STORAGE (Required for File Uploads)
# ==================================
# Vercel Blob storage token for uploading student verification documents
# Get from: Vercel Dashboard → Storage → Blob → Create Store
# Required for: Student ID cards, government IDs, selfies, profile photos
# If not set: File uploads will fail with an error message
BLOB_READ_WRITE_TOKEN="vercel_blob_rw_xxxxxxxxxxxx"

# ==================================
# IMPORTANT NOTES FOR VERCEL DEPLOYMENT
# ==================================
# REQUIRED variables for production:
# - DATABASE_URL (MUST be set at build-time AND runtime - see note above)
# - GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET (runtime only)
# - NEXTAUTH_SECRET (runtime only)
# - NEXTAUTH_URL (runtime only)
#
# RECOMMENDED variables for production:
# - EMAIL_HOST, EMAIL_USER, EMAIL_PASS (for notifications, runtime only)
# - REDIS_URL (for better performance, runtime only)
# - NEXT_PUBLIC_BASE_URL (for correct email links, build+runtime)
#
# OPTIONAL variables:
# - JWT_SECRET (only if using admin panel, runtime only)
# - TOKEN_SECRET (for email link tokens, runtime only)
# - VERIFICATION_CODE_EXPIRY (defaults to 600 seconds, runtime only)
#
# For detailed setup instructions and build-time vs runtime requirements, see:
# - VERCEL_ENV_VARIABLES_GUIDE.md (comprehensive guide with troubleshooting)
# - .env.production.template (minimal production template)
# - docs/env_variables_required.md
# - docs/database_setup_vercel.md
